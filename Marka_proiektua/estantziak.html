<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="CSS/styles.css">
   
</head>
<body>

 <nav class="navbar navbar-expand-md navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand href" href="#"><img src="argazkiak/logoa-2.png" width="125" height="100"></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offset-8 collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 align-items-right">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="index.html">Hasiera</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="helmugak.html">Helmugak</a>
            </li>
          
            <li class="nav-item">
              <a class="nav-link active" href="estantziak.html" tabindex="-1" aria-disabled="true">Eztantziak</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="kontaktua.html">Kontaktua</a>
            </li>
          </ul>
          </div>
       </div>
      </nav>


<div class="container-fluid ">
  <label for="izarrak">Filtrar por estrellas:</label>
  <select name="izarrak" id="izarrak" onchange="izarrak_filtroa(value)">
    <option value="">Todos</option>
    <option value="1">1 izar</option>
    <option value="2">2 estrellas</option>
    <option value="3">3 estrellas</option>
    <option value="4">4 estrellas</option>
    <option value="5">5 estrellas</option>
  </select>
  <h1>HOTELAK</h1>
  <div class="row justify-content-around mt-3" id="cardak">
    
  </div>
     

</div>





 <div class="container-fluid">
    <div class="row p-5 bg-light text-center">
   
        <div class="iconos col-md-6 col-lg-4 ">
          <h3>Gure Sare Sozialak</h3>
          <!--<a class="icono-twitter" href="https://twitter.com"><i class="bi bi-twitter"></i></a>-->
          <a href="https://twitter.com"><img width="30px" height="30x" src="argazkiak/twitter.png"></a> 
          <!--<a class="icono-mail" href="https://mail.google.com/mail/u/0/?tab=rm&ogbl#inbox"><i class="bi bi-google"></i></a>-->
          <a href="https://youtube.com"><img width="25px" height="20px" src="argazkiak/mail.png"></a>
          <!--<a class="icono-instagram" href="https://instagram.com"><i class="bi bi-instagram "></i></a>-->
          <a href="https://instagram.com"><img width="20px" height="20px" src="argazkiak/instagram.png"></a>
          <!--<a class="icono-facebook" href="https://facebook.com"><i class="bi bi-facebook"></i></a>-->
          <a href="https://facebook.com"><img width="20px" height="20px" src="argazkiak/facebook.png"></a>
        </div>
         
        <div class="col-md-6 col-lg-4">
           <h3>Kontaktua</h3>
           <a href="tel:+34612234251"><i class="bi bi-telephone"> +34 612 23 42 51</i></a>
            <p><i class="bi bi-envelope"> ikabidaiak@gmail.com</i></p>
        </div>
        <div class="col-md-12 col-lg-4"><img src="argazkiak/logoa-2.png" width="145" height="120"></div>
    </div>
  </div>
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

</body>

<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      nire_funtzioa(this);
    }
  };
  xmlhttp.open("GET", "http://localhost/Marka_proiektua/estantziak.xml", true);
  xmlhttp.send();
});

var xmlDoc;

function nire_funtzioa(xml) {
  //console.log(xml);
  var x, i, txt;
  xmlDoc = xml.responseXML;
  //console.log(xmlDoc);

  var card_zona = document.getElementById("cardak");

  var hotelak = xmlDoc.getElementsByTagName("hotela");
  for (var i=0; i < hotelak.length; i++)
  {
    console.log(hotelak[i].getElementsByTagName("izena")[0].childNodes[0].nodeValue);
    var hotel_izena = hotelak[i].getElementsByTagName("izena")[0].childNodes[0].nodeValue;

    console.log(hotelak[i].getElementsByTagName("irudia")[0].childNodes[0].nodeValue);
    var hotel_argazkia = hotelak[i].getElementsByTagName("irudia")[0].childNodes[0].nodeValue;

    console.log(hotelak[i].getElementsByTagName("kapazitatea")[0].childNodes[0].nodeValue);
    var kapazitatea = hotelak[i].getElementsByTagName("kapazitatea")[0].childNodes[0].nodeValue;
    


    var carda = '<div class="card col-lg-4 col-md-6"><img class="card-img-top" src="'+hotel_argazkia+'" alt="Card image cap"><div class="card-body"><h5 class="card-title">'+hotel_izena+'</h5><p class="card-text">Kapazitatea '+kapazitatea+'</p><a href="#" class="btn btn-primary">Go somewhere</a></div></div>';
    card_zona.innerHTML += carda;


    
    //function applyFilter2() {
    //var nodes = document.evaluate("//hotela[@izarrak]", document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
  }
  
};

/*function hotel_filtratu(izarrak){
  var card_zona = document.getElementById("cardak");
  card_zona.innerHTML = "";
  if (izarrak == ""){ //DENAK
    izarrak = "1|2|3|4|5";//???
  }else{
    izarrak = values 
    var pepito=xmlDoc.evaluate('/estantziak/hotelak/hotela[@izarrak='+izarrak+']',xmlDoc, null, XPathResult.ANY_TYPE,null);
    var result = pepito.iterateNext();
    while (result) {
              carda += result.childNodes[0].nodeValue + "<br>";
              result = pepito.iterateNext(); 
          } 
    

    
    //function applyFilter2() {
    //var nodes = document.evaluate("//hotela[@izarrak]", document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
  }
}*/

 function izarrak_filtroa(izarrak) {
        var x, i, txt;
        //xmlDoc = xml.responseXML;
        var card = document.getElementById("card_zona");
        card_zona.innerHTML = "";
        txt = "";
        var parser = new DOMParser();
        var list = xmlDoc.evaluate("//*/hotela[@izarrak='" + izarrak + "']", xmlDoc, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
        if (list.snapshotLength > 0) {
            var cards = document.getElementById("card_zona");
            for (var i = 0; i < list.snapshotLength; i++) {
                var izarrak = list.snapshotItem(i).getAttribute("izarrak")[0].innerHTML;
                var Izena = list.snapshotItem(i).getElementsByTagName("Izena")[0].innerHTML;
                var Irudia = list.snapshotItem(i).getElementsByTagName("argazkia")[0].innerHTML;
                var Iritziak = list.snapshotItem(i).getElementsByTagName("Iritziak")[0].innerHTML;

                console.log(list.snapshotItem(i).getElementsByTagName("Izena")[0].innerHTML);

                var carda = '<div class="col"><div class="card"><img src="' + Irudia + '" class="card-img-top" alt="..."><div class="card-body"><h5 class="card-title">' + Izena;
                for (var p = 0; p < izarrak; p++) {
                    carda += ' <img src="Irudiak/Izarra.png" style="width: 15px; height: 15px;"/>';
                }
                carda += '</h5><p class="card-text">' + Iritziak + '</p></div></div></div>';

                card_zona.insertAdjacentHTML('beforeend', carda)
            }
        } else {
            alert("Ez dago zure aukerak betetzen duen filtrorik");
        }

    }

    function denak() {
        var cards = document.getElementById("card_zona");
        card_zona.innerHTML = "";

        for (var i = 0; i < xmlDoc.getElementsByTagName("hotela").length; i++) {
            var izarrak = xmlDoc.getElementsByTagName("hotela")[i].getAttribute("izarrak");
            var Izena = xmlDoc.getElementsByTagName("Izena")[i].innerHTML;
            var Irudia = xmlDoc.getElementsByTagName("argazkia")[i].innerHTML;
            var Iritziak = xmlDoc.getElementsByTagName("Iritziak")[i].innerHTML;

            var carda = '<div class="col"><div class="card"><img src="' + Irudia + '" class="card-img-top" alt="..."><div class="card-body"><h5 class="card-title">' + Izena;
            for (var p = 0; p < izarrak; p++) {
                carda += ' <img src="Irudiak/Izarra.png" style="width: 15px; height: 15px;"/>';
            }
            carda += '</h5><p class="card-text">' + Iritziak + '</p></div></div></div>';

            card_zona.insertAdjacentHTML('beforeend', carda)
        }
    }

    document.getElementById("denak").onclick = function () { denak() };

</script> 

</html>